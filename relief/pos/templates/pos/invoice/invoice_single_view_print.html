{% load index %}
{% load static %}
{% load widget_tweaks %}
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="{% static 'pos/spectre.min.css' %}" />
    <link rel="stylesheet" type="text/css" href="{% static 'pos/spectre-icons.min.css' %}" />
    <link rel="stylesheet" type="text/css" href="{% static 'pos/spectre-exp.min.css' %}" />
    <link rel="stylesheet" type="text/css" href="{% static 'pos/main.css' %}" />
</head>
<body>
<div class="container">
    <div class="columns py-2">
        <div class="columns column col-12">
            <div class="column col-7">
                <ul>
                    <li class="text-bold">{{ company.name }}</li>
                    <li>{{ company.address }}</li>
                    <li>{{ company.postal_code }}</li>
                    <li>TEL: {{ company.tel_no }}</li>
                    <li>FAX: {{ company.fax_no }}</li>
                </ul>
            </div>
            <div class="columns col-5">
                <div class="col-12">
                    <ul class="columns float-right col-12">
                        <li class="column col-6">
                            <b>Invoice Number:</b>
                        </li>
                        <li class="column col-6">
                            {% if invoice.invoice_year is not None %}
                            {{ invoice.invoice_year }}
                            {% endif %}
                            {% if invoice.invoice_number is not None %}
                            <!-- 4 leading zeroes display only in template. -->
                            {{ invoice.invoice_number|stringformat:"04d" }}
                            {% endif %}
                        </li>
                        <li class="column col-6">
                            <b>Date Generated:</b>
                        </li>
                        <li class="column col-6">
                            {{ invoice.date_generated }}
                        </li>
                        <li class="column col-6">
                            <b>Date From:</b>
                        </li>
                        <li class="column col-6">{{ invoice.start_date }}</li>
                        <li class="column col-6">
                            <b>Date To:</b>
                        </li>
                        <li class="column col-6">{{ invoice.end_date }}</li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="column col-12">
            <ul>
                <li><h6>BILL TO:</h6></li>
                {% if customer.name is not None %}
                <li>{{ customer.name }}</li>
                {% endif %}

                {% if customer.address is not None %}
                <li>{{ customer.address }}</li>
                {% endif %}

                {% if customer.postal_code is not None %}
                <li>{{ customer.postal_code }}</li>
                {% endif %}

                {% if customer.tel_no is not None %}
                <li>{{ customer.tel_no }}</li>
                {% endif %}

                {% if customer.fax_no is not None %}
                <li>{{ customer.fax_no }}</li>
                {% endif %}

                {% if customer.term is not None %}
                <li>TERM: {{ customer.term }}</li>
                {% endif %}
            </ul>
        </div>
    </div>
    <div class="column col-12">
        <table class="table">
            <tr>
                <th>Date</th>
                {% for cp in customerproducts %}
                <th>{{ cp.product.name }}</th>
                {% endfor %}
                <th>D/O</th>
            </tr>
        {% for r in rows_list %}
            <tr>
                <td>{{ r.date|date:"d M Y"  }}</td>
                {% for cp in customerproducts %}
                <td>
                    {% if r|keyvalue:cp.product.name is not None and r|keyvalue:cp.product.name != 0%}
                    {{ r|keyvalue:cp.product.name }}
                    {% endif %}
                </td>
                {% endfor %}
                <td>{{ r.do_number }}</td>
            </tr>
        {% endfor %}
            <tr><td style="border:none;"></td></tr>
            <tr>
                <td><b>QUANTITY</b></td>
                {% for cp in customerproducts %}
                <td><b>{{ quantity|keyvalue:cp.product.name }}</b></td>
                {% endfor %}
                <td></td>
            </tr>
            <tr>
                <td><b>UNIT PRICE</b></td>
                {% for cp in customerproducts %}
                <td><b>{{ unit_price|keyvalue:cp.product.name }}</b></td>
                {% endfor %}
                <td></td>
            </tr>
            <tr>
                <td><b>NETT AMT</b></td>
                {% for cp in customerproducts %}
                <td><b>{{ nett_amt|keyvalue:cp.product.name }}</b></td>
                {% endfor %}
                <td></td>
            </tr>
        </table>
    </div>

    <div class="columns py-2">
        <div class="column col-5">
            <label class="form-label">{{ invoice_form.remark.label }}</label>
            {% if invoice_form.instance.remark %}
            <p>{{ invoice_form.instance.remark }}</p>
            {% endif %}
        </div>
        <div class="column col-4"></div>
        <div class="column col-3">
            <form action="{% url 'pos:invoice_view' pk=invoice.id %}" method="post">
                <div class="columns">
                    <div class="column col-6">
                        <label class="form-label">{{ invoice_form.original_total.label }}</label>
                    </div>
                    <div class="column col-6">
                        <label class="form-label">{{ invoice_form.instance.original_total }}</label>
                    </div>
                    <div class="column col-6">
                        <label class="form-label">{{ invoice_form.minus.label }}</label>
                    </div>
                    <div class="column col-6">
                        <label class="form-label">{{ invoice_form.instance.minus }}</label>
                    </div>
                    <div class="column col-6">
                        <label class="form-label">{{ invoice_form.net_total.label }}</label>
                    </div>
                    <div class="column col-6">
                        <label class="form-label">{{ invoice_form.instance.net_total }}</label>
                    </div>
                    <div class="column col-6">
                        <label class="form-label">GST {{ invoice_form.instance.gst }}%</label>
                    </div>
                    <div class="column col-6">
                        <label class="form-label">{{ invoice_form.instance.net_gst }}</label>
                    </div>
                    <div class="column col-6">
                        <label class="form-label">{{ invoice_form.total_incl_gst.label }}</label>
                    </div>
                    <div class="column col-6">
                        <label class="form-label">{{ invoice_form.instance.total_incl_gst }}</label>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
</body>
