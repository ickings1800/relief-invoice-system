{% extends 'pos/master/menu_nav.html' %}
{% load index %}
{% load widget_tweaks %}
{% block content %}
<div class="container">
    <div class="columns py-2">
        <div class="columns column col-12">
            <div class="column col-9">
                <ul>
                    <li class="text-bold">{{ company.name }}</li>
                    <li>{{ company.address }}</li>
                    <li>{{ company.postal_code }}</li>
                    <li>TEL: {{ company.tel_no }}</li>
                    <li>FAX: {{ company.fax_no }}</li>
                </ul>
            </div>
            <div class="column col-3">
                <table class="table invoice-table">
                    <tr>
                        <td style="border:none;">INVOICE NO:</td>
                        <td style="border:none;">{{ invoice.pk }}</td>
                    </tr>
                    <tr>
                        <td style="border:none;">DATE: </td>
                        <td style="border:none;">{{ invoice.date_generated }}</td>
                    </tr>
                </table>
            </div>
        </div>
        <div class="column col-12">
            <ul>
                <li><h6>BILL TO:</h6></li>
                {% if customer.name is not None %}
                <li>{{ customer.name }}</li>
                {% endif %}
    
                {% if customer.address is not None %}
                <li>{{ customer.address }}</li>
                {% endif %}
    
                {% if customer.postal_code is not None %}
                <li>{{ customer.postal_code }}</li>
                {% endif %}
    
                {% if customer.tel_no is not None %}
                <li>{{ customer.tel_no }}</li>
                {% endif %}
    
                {% if customer.fax_no is not None %}
                <li>{{ customer.fax_no }}</li>
                {% endif %}
    
                {% if customer.term is not None %}
                <li>TERM: {{ customer.term }}</li>
                {% endif %}                
            </ul>
        </div>
    </div>
    <div class="column col-12">
        <table class="table">
            <tr>
                <th>Date</th>
                {% for cp in customerproducts %}
                <th>{{ cp.product.name }}</th>
                {% endfor %}
                <th>D/O</th>
            </tr>
        {% for r in rows_list %}
            <tr>
                <td>{{ r.date|date:"d M Y"  }}</td>
                {% for cp in customerproducts %}
                <td>
                    {% if r|keyvalue:cp.product.name is not None %}
                    {{ r|keyvalue:cp.product.name }}
                    {% endif %}
                </td>
                {% endfor %}
                <td>{{ r.do_number }}</td>
            </tr>
        {% endfor %}
            <tr><td style="border:none;"></td></tr>
            <tr>
                <td><b>QUANTITY</b></td>
                {% for cp in customerproducts %}
                <td><b>{{ quantity|keyvalue:cp.product.name }}</b></td>
                {% endfor %}
                <td></td>
            </tr>
            <tr>
                <td><b>UNIT PRICE</b></td>
                {% for cp in customerproducts %}
                <td><b>{{ unit_price|keyvalue:cp.product.name }}</b></td>
                {% endfor %}
                <td></td>
            </tr>
            <tr>
                <td><b>NETT AMT</b></td>
                {% for cp in customerproducts %}
                <td><b>{{ nett_amt|keyvalue:cp.product.name }}</b></td>
                {% endfor %}
                <td></td>
            </tr>
        </table>
    </div>

    <div class="columns py-2">
        <div class="column col-5">
            <label class="form-label">{{ invoice_form.remark.label }}</label>
            {% render_field invoice_form.remark class="form-input" %}
        </div>
        <div class="column col-4"></div>
        <div class="column col-3">
            <form action="{% url 'pos:invoice_view' pk=invoice.id %}" method="post">
                <div class="columns">
                    <div class="column col-4">
                        <label class="form-label">{{ invoice_form.original_total.label }}</label>
                    </div>
                    <div class="column col-8">
                        {% render_field invoice_form.original_total class="form-input" %}
                    </div>
                    <div class="column col-4">
                        <label class="form-label">{{ invoice_form.minus.label }}</label>
                    </div>
                    <div class="column col-8">
                        {% render_field invoice_form.minus class="form-input" %}
                    </div>
                    <div class="column col-4">
                        <label class="form-label">{{ invoice_form.net_total.label }}</label>
                    </div>
                    <div class="column col-8">
                        {% render_field invoice_form.net_total class="form-input" %}
                    </div>
                    <div class="column col-4">
                        <label class="form-label">{{ invoice_form.gst.label }}</label>
                    </div>
                    <div class="column col-8">
                        {% render_field invoice_form.net_gst class="form-input" %}
                    </div>
                    <div class="column col-4">
                        <label class="form-label">{{ invoice_form.total_incl_gst.label }}</label>
                    </div>
                    <div class="column col-8">
                        {% render_field invoice_form.total_incl_gst class="form-input" %}
                    </div>
                </div>
                <div class="py-2">
                    <button class="btn btn-primary float-right" type="submit" value="Next">Save</button>
                </div>
            </form>
        </div>
    </div>
</div>

{% endblock %}